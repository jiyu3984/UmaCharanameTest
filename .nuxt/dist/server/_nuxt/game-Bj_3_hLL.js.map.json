{"file":"game-Bj_3_hLL.js","mappings":"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","names":["_sfc_main","_ssrRenderAttrs","_mergeProps","_ssrInterpolate","TimerDisplay","_ssrIncludeBooleanAttr","_ssrLooseContain","_ssrRenderComponent","_ssrRenderStyle","_ssrRenderAttr","_ssrRenderClass","_ssrRenderList","__unimport_unref_","__unimport_formatDate","__unimport_formatTime","_withCtx","_push","_parent","_createTextVNode"],"sources":["../../../../node_modules/nuxt/dist/app/compat/interval.js","../../../../components/TimerDisplay.vue","../../../../utils/helpers.js","../../../../store/index.js","../../../../store/history.js","../../../../store/setting.js","../../../../components/GameBoard.vue","../../../../pages/game.vue"],"sourcesContent":["import { createError } from \"../composables/error.js\";\nconst intervalError = \"[nuxt] `setInterval` should not be used on the server. Consider wrapping it with an `onNuxtReady`, `onBeforeMount` or `onMounted` lifecycle hook, or ensure you only call it in the browser by checking `import.meta.client`.\";\nexport const setInterval = import.meta.client ? window.setInterval : () => {\n  if (import.meta.dev) {\n    throw createError({\n      statusCode: 500,\n      message: intervalError\n    });\n  }\n  console.error(intervalError);\n};\n","<template>\r\n  <div class=\"timer\">\r\n    {{ formattedTime }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    startTime: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentTime: Date.now()\r\n    }\r\n  },\r\n  computed: {\r\n    elapsedTime() {\r\n      return this.currentTime - this.startTime\r\n    },\r\n    formattedTime() {\r\n      const totalSeconds = Math.floor(this.elapsedTime / 1000)\r\n      const minutes = Math.floor(totalSeconds / 60)\r\n      const seconds = totalSeconds % 60\r\n      return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.timer = setInterval(() => {\r\n      this.currentTime = Date.now()\r\n    }, 1000)\r\n  },\r\n  beforeUnmount() {\r\n    clearInterval(this.timer)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.timer {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  margin-bottom: 1rem;\r\n}\r\n</style>","export const formatTime = (milliseconds) => {\r\n  const totalSeconds = Math.floor(milliseconds / 1000)\r\n  const minutes = Math.floor(totalSeconds / 60)\r\n  const seconds = totalSeconds % 60\r\n  return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\r\n}\r\n\r\nexport const formatDate = (isoString) => {\r\n  const date = new Date(isoString)\r\n  return date.toLocaleString('zh-CN', {\r\n    year: 'numeric',\r\n    month: '2-digit',\r\n    day: '2-digit',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  })\r\n}","import { defineStore } from 'pinia'\r\nimport { LocalStorage } from 'quasar'\r\n\r\nexport const useHistoryStore = defineStore('history', {\r\n  state: () => ({\r\n    records: LocalStorage.getItem('game-history') || []\r\n  }),\r\n  actions: {\r\n    addRecord(record) {\r\n      this.gameHistory.push(record)\r\n      LocalStorage.set('game-history', this.records)\r\n    }\r\n  }\r\n})\r\n\r\nexport const useGameStore = defineStore('game', {\r\n  state: () => ({\r\n    gameHistory: []\r\n  }),\r\n  actions: {\r\n    addHistory(record) {\r\n      this.gameHistory.push(record)\r\n    }\r\n  }\r\n})","import { defineStore } from 'pinia'\r\n\r\nexport const useHistoryStore = defineStore('history', {\r\n  state: () => ({\r\n    records: []\r\n  }),\r\n  actions: {\r\n    addRecord(record) {\r\n      this.records.unshift({\r\n        timestamp: new Date().toISOString(),\r\n        ...record\r\n      })\r\n    }\r\n  }\r\n})","import { defineStore } from 'pinia'\r\n\r\nexport const useSettingsStore = defineStore('settings', {\r\n  state: () => ({\r\n    allowContinueOnError: false,\r\n    random30: false\r\n  }),\r\n  persist: true\r\n})","<template>\r\n  <div class=\"game-container\">\r\n    <div v-if=\"!gameStarted\" class=\"start-screen\">\r\n      <h2>{{ mode === 'normal' ? '马批浓度测试器' : '马批浓度测试器 - 声优吃模式' }}</h2>\r\n      <div class=\"settings\" v-if=\"!gameStarted\">\r\n        <div class=\"checkbox-container\">\r\n          <div><label class=\"ios-checkbox green\">\r\n              <input type=\"checkbox\" v-model=\"settings.random30\" />\r\n              <div class=\"checkbox-wrapper\">\r\n                <div class=\"checkbox-bg\"></div>\r\n                <svg fill=\"none\" viewBox=\"0 0 24 24\" class=\"checkbox-icon\">\r\n                  <path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-width=\"3\" stroke=\"currentColor\"\r\n                    d=\"M4 12L10 18L20 6\" class=\"check-path\"></path>\r\n                </svg>\r\n              </div>\r\n            </label>\r\n            随机30个角色\r\n          </div>\r\n          <div>\r\n            <label class=\"ios-checkbox green\">\r\n              <input type=\"checkbox\" v-model=\"settings.allowContinueOnError\" />\r\n              <div class=\"checkbox-wrapper\">\r\n                <div class=\"checkbox-bg\"></div>\r\n                <svg fill=\"none\" viewBox=\"0 0 24 24\" class=\"checkbox-icon\">\r\n                  <path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-width=\"3\" stroke=\"currentColor\"\r\n                    d=\"M4 12L10 18L20 6\" class=\"check-path\"></path>\r\n                </svg>\r\n              </div>\r\n            </label>\r\n            不校验答案\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <button @click=\"startGame\">开始挑战</button>\r\n    </div>\r\n\r\n    <template v-else>\r\n\r\n      <TimerDisplay v-if=\"gameStarted & displayTime\" :startTime=\"startTime\" />\r\n\r\n      <div v-if=\"gameStarted && currentCharacter\" class=\"progress-container\">\r\n        <div class=\"progress-text\">{{ progressText }}</div>\r\n        <div class=\"progress-bar\">\r\n          <div class=\"progress-fill\" :style=\"{\r\n            width: progressPercentage + '%',\r\n            backgroundColor: subColor\r\n          }\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <transition name=\"fade\" mode=\"out-in\">\r\n        <div v-if=\"currentCharacter\" key=\"game\" class=\"character-card\">\r\n          <li class=\"charaContainer\" style=\"transition-delay: 0s;\"><a data-v-2ed22295=\"\" data-v-edf74022=\"\"\r\n              class=\"charaALink\" v-bind:style=\"{ '--color-main': mainColor, '--color-sub': subColor }\">\r\n              <div class=\"charaInner\">\r\n                <dl class=\"charaDl\">\r\n                  <dt class=\"charaDt\">\r\n                    <div class=\"dt-img\">\r\n                      <picture class=\"img-loaded\">\r\n                        <img :src=\"getImageUrl(currentCharacter.image)\" width=\"100%\">\r\n                      </picture>\r\n                    </div>\r\n                    <div class=\"dt-bg\">\r\n                      <p class=\"font-weight-bold\">{{ mode === 'normal' ? 'Umamusume' : currentCharacter.names.en }}</p>\r\n                    </div>\r\n                  </dt>\r\n                  <dd class=\"charaDd\">\r\n                    <p class=\"name\">\r\n                    <div class=\"input-container\" v-if=\"mode === 'normal'\">\r\n                      <div>\r\n                        <input placeholder=\"中文名/日文名/英文名\" class=\"input-field\" type=\"text\" v-model=\"userInput\"\r\n                          @keyup.enter=\"checkAnswer\" :class=\"{ 'error-shake': isError }\">\r\n                        <label for=\"input-field\" class=\"input-label\"></label>\r\n                        <span class=\"input-highlight\" v-bind:style=\"{ 'background-color': subColor }\"></span>\r\n                      </div>\r\n                    </div>\r\n                    <div v-if=\"mode === 'seiyuu'\">\r\n                      {{ currentCharacter.names.zh }}\r\n                    </div>\r\n                    </p>\r\n                    <div class=\"cv\" v-if=\"mode === 'seiyuu'\">\r\n                      <p class=\"charaP\">\r\n                        <span class=\"charaSpan\">CV:</span>\r\n                        <input placeholder=\"中文名/日文名/英文名\" class=\"input-field\" type=\"text\" v-model=\"userInput\"\r\n                          @keyup.enter=\"checkAnswer\" :class=\"{ 'error-shake': isError }\"\r\n                          style=\"text-align: left; color: #505050;\">\r\n                        <label for=\"input-field\" class=\"input-label\"></label>\r\n                        <span class=\"input-highlight\" v-bind:style=\"{ 'background-color': subColor }\"></span>\r\n                      </p>\r\n                    </div>\r\n                  </dd>\r\n                </dl>\r\n              </div>\r\n            </a>\r\n          </li>\r\n          <button @click=\"checkAnswer\" class=\"submit-button\">提交</button>\r\n        </div>\r\n\r\n        <div v-else class=\"result-screen\">\r\n          <h3>挑战完成！</h3>\r\n          <p>用时：{{ formattedTime }}</p>\r\n          <p v-if=\"this.settings.allowContinueOnError\">正确率：{{ accuracy }}%</p>\r\n          <p>正确数：{{ correctCount }}/{{ this.characters.length }}</p>\r\n          <div class=\"history-list\">\r\n            <h4>历史记录</h4>\r\n            <div v-for=\"(record, index) in history.records\" :key=\"index\" class=\"history-item\">\r\n              <p>{{ formatDate(record.timestamp) }}</p>\r\n              <p>模式：{{ record.mode === 'normal' ? '角色模式' : '声优模式' }}</p>\r\n              <p>用时：{{ formatTime(record.time) }}</p>\r\n              <p>正确率：{{ record.accuracy }}%</p>\r\n              <p>正确数：{{ record.correctCount }}/{{ record.charaTotal }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TimerDisplay from '~/components/TimerDisplay.vue'\r\nimport { useGameStore } from '~/store/index.js'\r\nimport { formatTime, formatDate } from '@/utils/helpers'\r\nimport { useHistoryStore } from '@/store/history.js'\r\nimport { useSettingsStore } from '@/store/setting.js'\r\n\r\nexport default {\r\n  setup() {\r\n    const history = useHistoryStore()\r\n    const settings = useSettingsStore()\r\n    return { history, settings }\r\n  },\r\n  components: {\r\n    TimerDisplay\r\n  },\r\n  props: {\r\n    mode: {\r\n      type: String,\r\n      default: 'normal'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      characters: [],\r\n      currentIndex: 0,\r\n      userInput: '',\r\n      startTime: null,\r\n      totalTime: null,\r\n      stopTime: null,\r\n      gameStarted: false,\r\n      displayTime: true,\r\n      correctCount: 0,\r\n      isError: false\r\n    }\r\n  },\r\n  computed: {\r\n    currentCharacter() {\r\n      return this.characters[this.currentIndex]\r\n    },\r\n    formattedTime() {\r\n      return formatTime(this.totalTime)\r\n    },\r\n    accuracy() {\r\n      return Math.round((this.correctCount / this.characters.length) * 100)\r\n    },\r\n    correctCount() {\r\n      return this.correctCount\r\n    },\r\n    mainColor() {\r\n      return this.currentCharacter.mainColor;\r\n    },\r\n    subColor() {\r\n      return this.currentCharacter.subColor;\r\n    },\r\n    progressPercentage() {\r\n      return ((this.currentIndex + 1) / this.characters.length) * 100\r\n    },\r\n    progressText() {\r\n      return `${this.currentIndex + 1}/${this.characters.length}`\r\n    }\r\n  },\r\n  methods: {\r\n    async startGame() {\r\n      const nuxtApp = useNuxtApp()\r\n      this.characters = await nuxtApp.$dataLoader.loadCharacters()\r\n      if (this.characters.length === 0) return\r\n\r\n      this.shuffleCharacters()\r\n\r\n      if (this.settings.random30) {\r\n        this.characters = this.characters.slice(0, 30)\r\n      }\r\n\r\n      this.gameStarted = true\r\n      this.displayTime = true\r\n      this.startTime = Date.now()\r\n    },\r\n    getImageUrl(imageName) {\r\n      return new URL(`/assets/images/characters/${imageName}`, import.meta.url).href\r\n    },\r\n    shuffleCharacters() {\r\n      for (let i = this.characters.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1))\r\n          ;[this.characters[i], this.characters[j]] =\r\n            [this.characters[j], this.characters[i]]\r\n      }\r\n    },\r\n    checkAnswer() {\r\n      const target = this.mode === 'normal'\r\n        ? this.currentCharacter.names\r\n        : this.currentCharacter.seiyuu\r\n\r\n      const validAnswers = [\r\n        target.jp,\r\n        target.zh,\r\n        target.en,\r\n        ...(target.aliases || [])\r\n      ].map(str => str.toLowerCase().trim())\r\n\r\n      if (validAnswers.includes(this.userInput.toLowerCase().trim())) {\r\n        this.correctCount++\r\n        this.nextCharacter()\r\n      } else {\r\n        this.handleError()\r\n      }\r\n    },\r\n    handleError() {\r\n      if (this.settings.allowContinueOnError) {\r\n        this.nextCharacter()\r\n      } else {\r\n        this.isError = true\r\n        setTimeout(() => this.isError = false, 1000)\r\n      }\r\n    },\r\n    nextCharacter() {\r\n      if (this.currentIndex < this.characters.length - 1) {\r\n        this.currentIndex++\r\n        this.userInput = ''\r\n      } else {\r\n        this.endGame()\r\n      }\r\n    },\r\n    endGame() {\r\n      this.displayTime = false\r\n      this.totalTime = Date.now() - this.startTime\r\n\r\n      this.currentIndex = this.characters.length\r\n\r\n      const gameStore = useGameStore()\r\n      gameStore.addHistory({\r\n        mode: this.mode,\r\n        time: this.totalTime,\r\n        date: new Date().toISOString(),\r\n      })\r\n\r\n      this.history.addRecord({\r\n        mode: this.mode,\r\n        time: this.totalTime,\r\n        accuracy: this.accuracy,\r\n        correctCount: this.correctCount,\r\n        charaTotal: this.characters.length\r\n      })\r\n    },\r\n    restartGame() {\r\n      this.gameStarted = false\r\n      this.displayTime = true\r\n      this.currentIndex = 0\r\n      this.userInput = ''\r\n      this.correctCount = 0\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n:root {\r\n  --color-text-base: #4d4d4d;\r\n  --color-text-gray: #141414;\r\n  --color-gray: #d2d2d2;\r\n  --color-blue: #2a5dfa;\r\n  --color-green: #69c832;\r\n  --color-yellow: #ffba00;\r\n  --color-orange: #ff9600;\r\n  --color-error: red\r\n}\r\n\r\n@media (orientation : portrait) {\r\n  .charaContainer {\r\n    width: 27.3333333333vh !important;\r\n    height: 44vh !important;\r\n  }\r\n\r\n  .charaDl {\r\n    height: 42.9333333333vh !important;\r\n    width: 26.2666666667vh !important;\r\n  }\r\n\r\n  .dt-img {\r\n    height: 34.4vh !important;\r\n  }\r\n\r\n  .font-weight-bold {\r\n    font-size: 2.8vh !important;\r\n    margin-top: 1.0666666667vh !important;\r\n  }\r\n\r\n  .font-weight-bold {\r\n    font-size: 2.8vh !important;\r\n    margin-top: 1.0666666667vh !important;\r\n  }\r\n\r\n  .charaDd {\r\n    padding-left: 2vh !important;\r\n  }\r\n\r\n  .name {\r\n    font-size: 2.3vh !important;\r\n  }\r\n\r\n  .cv {\r\n    font-size: 2.4vh !important;\r\n    margin-top: .9333333333vh !important;\r\n  }\r\n\r\n  .charaP {\r\n    font-size: 1.8vh !important;\r\n  }\r\n\r\n  a dl dt .dt-bg:before {\r\n    height: 30vh !important;\r\n    width: 21.7333333333vh !important;\r\n  }\r\n\r\n  a dl dd:before {\r\n    width: .9333333333vh !important;\r\n  }\r\n}\r\n\r\n/* 纯抄袭官网，实在懒得细改了 */\r\n.charaContainer {\r\n  -webkit-text-size-adjust: 100%;\r\n  -webkit-tap-highlight-color: transparent;\r\n  --vh: 8.34px;\r\n  font-family: YakuHanJP, Roboto, Zen Kaku Gothic New, sans-serif;\r\n  font-weight: 500;\r\n  line-height: 1;\r\n  color: var(--color-text-gray);\r\n  list-style: none;\r\n  border-style: solid;\r\n  border-width: 0;\r\n  box-sizing: border-box;\r\n  transition: transform .7s cubic-bezier(.19, 1, .22, 1), opacity .7s cubic-bezier(.165, .84, .44, 1);\r\n  height: 44vw;\r\n  margin: auto;\r\n  width: 27.3333333333vw;\r\n  opacity: 1;\r\n  transform: translateY(0) translateZ(0);\r\n  transition-delay: 0s;\r\n}\r\n\r\n.charaALink {\r\n  -webkit-text-size-adjust: 100%;\r\n  --vh: 8.34px;\r\n  font-family: YakuHanJP, Roboto, Zen Kaku Gothic New, sans-serif;\r\n  font-weight: 500;\r\n  line-height: 1;\r\n  list-style: none;\r\n  border-style: solid;\r\n  border-width: 0;\r\n  box-sizing: border-box;\r\n  color: inherit;\r\n  text-decoration: none;\r\n  outline: none;\r\n  -webkit-tap-highlight-color: transparent;\r\n  --color-btn: var(--color-main);\r\n  background-color: var(--color-sub);\r\n  filter: drop-shadow(var(--xpos) var(--ypos) var(--blur) rgba(0, 0, 0, .2));\r\n  height: 100%;\r\n  width: 100%;\r\n  --xpos: 0;\r\n  --ypos: .4vw;\r\n  --blur: .6666666667vw;\r\n  display: block;\r\n  overflow: hidden;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.charaInner,\r\n.charaDl,\r\n.charaDt,\r\n.dt-img,\r\n.img-loaded,\r\n.dt-bg,\r\n.font-weight-bold,\r\n.charaDd,\r\n.name,\r\n.cv,\r\n.charaP,\r\n.charaSpan {\r\n  -webkit-text-size-adjust: 100%;\r\n  --vh: 8.34px;\r\n  border-style: solid;\r\n  border-width: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.charaInner,\r\n.charaDl,\r\n.charaDt,\r\n.dt-img,\r\n.img-loaded,\r\n.dt-bg {\r\n  font-family: YakuHanJP, Roboto, Zen Kaku Gothic New, sans-serif;\r\n  line-height: 1;\r\n  list-style: none;\r\n  color: inherit;\r\n  -webkit-tap-highlight-color: transparent;\r\n  --color-btn: var(--color-main);\r\n  --xpos: 0;\r\n  --ypos: .4vw;\r\n  --blur: .6666666667vw;\r\n}\r\n\r\n.charaInner {\r\n  font-weight: 500;\r\n  height: 100%;\r\n}\r\n\r\n.charaDl {\r\n  margin: 0;\r\n  background-color: #fff;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  height: 42.9333333333vw;\r\n  width: 26.2666666667vw;\r\n  transform: translateZ(0);\r\n  transition: transform .3s cubic-bezier(.165, .84, .44, 1);\r\n}\r\n\r\n.charaDt {\r\n  font-weight: inherit;\r\n}\r\n\r\n.dt-img {\r\n  object-fit: cover;\r\n  overflow: hidden;\r\n  position: relative;\r\n  z-index: 2;\r\n  height: 34.4vw;\r\n}\r\n\r\n.img-loaded {\r\n  display: block;\r\n}\r\n\r\n.dt-bg {\r\n  display: flex;\r\n  left: 0;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  z-index: 1;\r\n}\r\n\r\n.font-weight-bold {\r\n  margin: 0;\r\n  font-weight: 700;\r\n  font-family: midasi-w, Raleway, sans-serif;\r\n  letter-spacing: .05em;\r\n  align-items: center;\r\n  color: var(--color-main);\r\n  display: flex;\r\n  flex: auto;\r\n  writing-mode: vertical-rl;\r\n  font-size: 2.8vw;\r\n  margin-top: 1.0666666667vw;\r\n}\r\n\r\n.charaDd {\r\n  font-family: YakuHanJP, Roboto, Zen Kaku Gothic New, sans-serif;\r\n  font-weight: 500;\r\n  margin-left: 0;\r\n  border-top: 1px solid var(--color-main);\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  justify-content: center;\r\n  position: relative;\r\n  z-index: 10;\r\n  padding-left: 2vw;\r\n  align-items: start;\r\n}\r\n\r\n.name {\r\n  margin: 0;\r\n  font-weight: 700;\r\n  letter-spacing: -.05em;\r\n  font-size: 2.3vw;\r\n}\r\n\r\n.cv {\r\n  color: #505050;\r\n  height: 1em;\r\n  font-size: 2.4vw;\r\n  margin-top: .9333333333vw;\r\n  display: inline-block;\r\n}\r\n\r\n.charaP {\r\n  color: #505050;\r\n  font-size: 1.8vw;\r\n  margin: 0;\r\n}\r\n\r\n.charaSpan {\r\n  font-family: midasi-w, Raleway, sans-serif;\r\n  letter-spacing: .05em;\r\n  margin-left: .1em;\r\n  margin-right: .1em;\r\n  display: inline-block;\r\n}\r\n\r\na dl dt .dt-bg:before {\r\n  background-color: var(--color-main);\r\n  content: \"\";\r\n  display: block;\r\n}\r\n\r\na dl dt .dt-bg:before {\r\n  height: 30vw;\r\n  width: 21.7333333333vw;\r\n}\r\n\r\na dl dd:before {\r\n  width: .9333333333vw;\r\n}\r\n\r\na dl dd:before {\r\n  background-color: var(--color-main);\r\n  content: \"\";\r\n  display: block;\r\n  height: 100%;\r\n  left: 0;\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n*,\r\n:after,\r\n:before {\r\n  border-style: solid;\r\n  border-width: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\na dl:after {\r\n  border: 1px solid var(--color-main);\r\n  content: \"\";\r\n  display: block;\r\n  height: 100%;\r\n  left: 0;\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  z-index: 10;\r\n}\r\n\r\n.progress-container {\r\n  margin: 20px auto;\r\n  max-width: 600px;\r\n  padding: 0 15px;\r\n}\r\n\r\n.progress-bar {\r\n  height: 12px;\r\n  background-color: #f0f0f0;\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.progress-fill {\r\n  height: 100%;\r\n  border-radius: 6px;\r\n  transition: width 0.3s ease, background-color 0.3s ease;\r\n}\r\n\r\n.progress-text {\r\n  text-align: center;\r\n  margin-bottom: 8px;\r\n  font-size: 1.1em;\r\n  color: var(--color-text-gray);\r\n  font-weight: bold;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .progress-container {\r\n    margin: 15px 10px;\r\n  }\r\n  \r\n  .progress-bar {\r\n    height: 10px;\r\n  }\r\n  \r\n  .progress-text {\r\n    font-size: 0.9em;\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"game-page\">\r\n    <GameBoard :mode=\"mode\" />\r\n    <nuxt-link to=\"/\" class=\"back-button\">返回首页</nuxt-link>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  computed: {\r\n    mode() {\r\n      return this.$route.query.mode || 'normal'\r\n    }\r\n  },\r\n  head() {\r\n    return {\r\n      title: this.mode === 'normal' ? '角色模式' : '声优模式'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.game-page {\r\n  padding: 20px;\r\n  position: relative;\r\n}\r\n\r\n.back-button {\r\n  position: absolute;\r\n  top: 20px;\r\n  left: 20px;\r\n}\r\n</style>"],"version":3}